var fs = require('fs');


exports.Statistics = function (config) {
	var me = this;

	me.calculateSpeed = function (positions) {
		var degToKm = 40074/360;

		var speed = [];
		var maxV = 0;

		for (var i = 0; i < positions.length-1; i++) {
			var dx = positions[i].x - positions[i+1].x;
			var dy = positions[i].y - positions[i+1].y;

			dx *= degToKm*Math.cos(positions[i].y*Math.PI/180);
			dy *= degToKm;

			var r = Math.sqrt(dx*dx + dy*dy);
			var v = r/(config.timeStepSeconds/3600);

			speed[i] = v;
			if (maxV < v) maxV = v;
		}
		
		console.log(maxV);
	}

	return me;
} 